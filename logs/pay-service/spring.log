17:00:46:533  INFO 4668 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
17:00:47:497  INFO 4668 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ca4bfb83-2848-3293-841a-136d58683fb8
17:00:47:831  INFO 4668 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
17:00:47:843  INFO 4668 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
17:00:47:844  INFO 4668 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
17:00:47:970  INFO 4668 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
17:00:47:981  INFO 4668 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1431 ms
17:00:48:143  INFO 4668 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
17:00:48:338  INFO 4668 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
17:00:49:845  INFO 4668 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
17:00:50:227  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of e657cddf-5dd1-4b45-9de2-60eae6d91154
17:00:50:228  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] RpcClient init label, labels = {module=naming, source=sdk}
17:00:50:230  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
17:00:50:230  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
17:00:50:230  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
17:00:50:230  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Try to connect to server on start up, server: {serverIp = '192.168.203.132', server main port = 8848}
17:00:50:353  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Success to connect to server [192.168.203.132:8848] on start up, connectionId = 1706086849936_192.168.203.1_2133
17:00:50:354  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
17:00:50:354  INFO 4668 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Notify connected event to listeners.
17:00:50:354  INFO 4668 --- [main] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$473/0x000000080041b040
17:00:50:395  INFO 4668 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
17:00:50:403  INFO 4668 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 192.168.203.1:8086 register finished
17:00:50:635  INFO 4668 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
17:00:50:637  INFO 4668 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
17:00:50:656  INFO 4668 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
17:00:50:730  INFO 4668 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 8.062 seconds (JVM running for 9.013)
17:00:50:735  INFO 4668 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=pay-service, group=DEFAULT_GROUP
17:00:50:735  INFO 4668 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=pay-service.yaml, group=DEFAULT_GROUP
17:00:50:735  INFO 4668 --- [main] c.a.c.n.refresh.NacosContextRefresher    : [Nacos Config] Listening config: dataId=pay-service-local.yaml, group=DEFAULT_GROUP
17:00:50:950  INFO 4668 --- [nacos-grpc-client-executor-7] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Receive server push request, request = NotifySubscriberRequest, requestId = 10
17:00:50:953  INFO 4668 --- [nacos-grpc-client-executor-7] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Ack server push request, request = NotifySubscriberRequest, requestId = 10
17:16:44:932  INFO 4668 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
17:16:44:932  INFO 4668 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
17:16:44:934  INFO 4668 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
17:16:45:090  INFO 4668 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
17:16:45:310  INFO 4668 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
17:16:45:318 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
17:16:45:341 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1750085212831760386(Long)
17:16:45:375 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
17:16:45:434 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
17:16:45:438 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1750085217118404610(Long), 1750085212831760386(Long), 1750085217118404609(Long), 1(Long), balance(String), 920400(Integer), 5(Integer), 1(Integer), 2024-01-24T19:16:45.428301700(LocalDateTime)
17:16:45:443 DEBUG 4668 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
17:16:47:911 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
17:16:47:911 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1750085217118404610(Long)
17:16:47:918 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
17:16:47:921 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=920400 HTTP/1.1
17:16:47:921 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
17:16:47:921 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
17:16:48:180 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200  (258ms)
17:16:48:181 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
17:16:48:181 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
17:16:48:181 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Wed, 24 Jan 2024 09:16:48 GMT
17:16:48:181 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
17:16:48:181 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
17:16:48:185 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
17:16:48:186 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-01-24T17:16:48.181091300(LocalDateTime), 1750085217118404610(Long), 0(Integer), 1(Integer)
17:16:48:188 DEBUG 4668 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
17:16:48:190 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> PUT http://trade-service/orders/1750085212831760386 HTTP/1.1
17:16:48:190 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] user-info: 1
17:16:48:190 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] ---> END HTTP (0-byte body)
17:16:48:232 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- HTTP/1.1 200  (42ms)
17:16:48:232 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] connection: keep-alive
17:16:48:232 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] content-length: 0
17:16:48:232 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] date: Wed, 24 Jan 2024 09:16:48 GMT
17:16:48:232 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] keep-alive: timeout=60
17:16:48:233 DEBUG 4668 --- [http-nio-8086-exec-2] com.hmall.api.client.TradeClient         : [TradeClient#markOrderPaySuccess] <--- END HTTP (0-byte body)
17:16:48:537  INFO 4668 --- [nacos-grpc-client-executor-207] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Receive server push request, request = NotifySubscriberRequest, requestId = 18
17:16:48:537  INFO 4668 --- [nacos-grpc-client-executor-207] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Ack server push request, request = NotifySubscriberRequest, requestId = 18
17:16:48:737  INFO 4668 --- [nacos-grpc-client-executor-208] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Receive server push request, request = NotifySubscriberRequest, requestId = 19
17:16:48:738  INFO 4668 --- [nacos-grpc-client-executor-208] com.alibaba.nacos.common.remote.client   : [e657cddf-5dd1-4b45-9de2-60eae6d91154] Ack server push request, request = NotifySubscriberRequest, requestId = 19
17:23:23:390  WARN 4668 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
17:23:23:390  WARN 4668 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
17:23:23:390  WARN 4668 --- [Thread-5] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
17:23:23:391  WARN 4668 --- [Thread-1] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
17:23:23:695  INFO 4668 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
17:23:23:699  INFO 4668 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
17:23:24:022  INFO 4668 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
17:23:24:023  INFO 4668 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6123ace6[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
17:23:24:023  INFO 4668 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1706086849936_192.168.203.1_2133
17:23:24:025  INFO 4668 --- [nacos-grpc-client-executor-304] c.a.n.c.remote.client.grpc.GrpcClient    : [1706086849936_192.168.203.1_2133]Ignore complete event,isRunning:false,isAbandon=false
17:23:24:027  INFO 4668 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7f9ee1bc[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 305]
17:23:24:031  INFO 4668 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
17:23:24:045  INFO 4668 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
